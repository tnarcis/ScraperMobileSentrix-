<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Image Converter ‚Äî MobileSentrix Extractor v8</title>
  <script>
    (function(){
      var storageKey = 'msx_theme';
      try {
        var stored = localStorage.getItem(storageKey);
        var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        var theme = stored || (prefersDark ? 'dark' : 'light');
        document.documentElement.setAttribute('data-bs-theme', theme);
        document.documentElement.dataset.theme = theme;
      } catch (error) {
        document.documentElement.setAttribute('data-bs-theme', 'dark');
      }
    })();
  </script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- External CSS Files -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/common.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/loading.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/image-converter.css') }}">
</head>
<body class="grid-bg image-page">
  <div class="page-shell container-xxl py-4">
    <header class="top-bar cy-card mb-4">
      <div class="header-main">
        <div>
          <h1 class="header-title">Image Converter</h1>
          <p class="header-subtitle">Convert WebP, PNG, JPG images to any format</p>
        </div>
                        <nav class="nav-pills">
                    <a href="/" class="nav-link">Extractor</a>
                    <a href="/history" class="nav-link">History</a>
                    <a href="/image-converter" class="nav-link active">Images</a>
                    <a href="/instructions" class="nav-link">Instructions</a>
                </nav>
      </div>
      <div class="switch-wrap">
        <label class="form-check-label" for="darkMode">Light</label>
        <div class="form-check form-switch m-0">
          <input class="form-check-input" type="checkbox" id="darkMode" checked>
        </div>
        <label class="form-check-label" for="darkMode">Dark</label>
      </div>
    </header>

    <div id="alert" class="alert cy-card d-none p-3" role="alert"></div>

    <!-- Converter Controls -->
    <section class="cy-card p-4 mb-4">
      <div class="mb-4">
        <h2 class="section-title">Image Conversion</h2>
        <p class="section-subtitle">Convert images from WebP to JPG/PNG or upload files for conversion</p>
      </div>
      
      <!-- Tab Navigation -->
      <ul class="nav nav-tabs mb-3" id="conversionTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="url-tab" data-bs-toggle="tab" data-bs-target="#url-panel" type="button" role="tab">
            <i class="fas fa-link"></i> From URL
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="upload-tab" data-bs-toggle="tab" data-bs-target="#upload-panel" type="button" role="tab">
            <i class="fas fa-upload"></i> Upload Files
          </button>
        </li>
      </ul>
      
      <!-- Tab Content -->
      <div class="tab-content" id="conversionTabContent">
        <!-- URL Tab -->
        <div class="tab-pane fade show active" id="url-panel" role="tabpanel">
          <div class="fieldset-card">
            <div class="fieldset-title">Image URLs</div>
            <p class="fieldset-subtitle">Paste image URLs (one per line). Supports WebP, JPG, PNG, and GIF formats.</p>
            <textarea id="imageUrls" class="form-control" placeholder="https://example.com/image1.webp&#10;https://example.com/image2.png&#10;..."></textarea>
          </div>
        </div>
        
        <!-- Upload Tab -->
        <div class="tab-pane fade" id="upload-panel" role="tabpanel">
          <div class="fieldset-card">
            <div class="fieldset-title">Upload Images</div>
            <p class="fieldset-subtitle">Select one or more images from your device for conversion.</p>
            <input type="file" class="form-control" id="fileUpload" multiple accept="image/*">
            <div class="form-text">Supported formats: JPEG, PNG, WebP, GIF, BMP, TIFF</div>
          </div>
          
          <!-- File Preview Area -->
          <div id="filePreviewArea" class="mt-3" style="display: none;">
            <div class="fieldset-title">Selected Images</div>
            <div id="previewContainer" class="row g-3 mt-2">
              <!-- File previews will be inserted here -->
            </div>
          </div>
        </div>
      </div>
      
      <div class="fieldset-grid mt-3">
        <div class="fieldset-card">
          <div class="fieldset-title">Output Format</div>
          <label class="form-label">Target Format</label>
          <select id="targetFormat" class="form-select">
            <option value="JPEG">JPEG</option>
            <option value="PNG">PNG</option>
            <option value="WEBP">WebP</option>
            <option value="GIF">GIF</option>
            <option value="BMP">BMP</option>
            <option value="TIFF">TIFF</option>
          </select>
        </div>

        <div class="fieldset-card">
          <div class="fieldset-title">Quality Settings</div>
          <label class="form-label">Quality (1-100)</label>
          <input id="quality" type="range" class="form-range" min="1" max="100" value="85">
          <div class="d-flex justify-content-between">
            <small class="text-muted">Low</small>
            <small id="qualityValue" class="text-primary fw-bold">85</small>
            <small class="text-muted">High</small>
          </div>
        </div>
      </div>

      <!-- Advanced Options (Collapsible) -->
      <div class="mt-3">
        <button class="btn btn-ghost w-100" type="button" data-bs-toggle="collapse" data-bs-target="#advancedOptions">
          <i class="fas fa-sliders-h"></i> Advanced Options
          <i class="fas fa-chevron-down ms-auto"></i>
        </button>
      </div>

      <div class="collapse mt-3" id="advancedOptions">
        <div class="fieldset-grid">
          <!-- Resize Options -->
          <div class="fieldset-card">
            <div class="d-flex align-items-center justify-content-between mb-2">
              <div class="fieldset-title">Resize Images</div>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="enableResize">
              </div>
            </div>
            <div id="resizeOptions" style="display: none;">
              <div class="mb-2">
                <label class="form-label small">Mode</label>
                <select id="resizeMode" class="form-select form-select-sm">
                  <option value="fit">Fit (maintain aspect)</option>
                  <option value="fill">Fill (crop to fit)</option>
                  <option value="exact">Exact (ignore aspect)</option>
                  <option value="scale">Scale by %</option>
                </select>
              </div>
              <div class="row g-2">
                <div class="col-6">
                  <label class="form-label small">Width</label>
                  <input id="resizeWidth" type="number" class="form-control form-control-sm" placeholder="Auto" min="1">
                </div>
                <div class="col-6">
                  <label class="form-label small">Height</label>
                  <input id="resizeHeight" type="number" class="form-control form-control-sm" placeholder="Auto" min="1">
                </div>
              </div>
              <div class="mt-2" id="scalePercentContainer" style="display: none;">
                <label class="form-label small">Scale %</label>
                <input id="scalePercent" type="number" class="form-control form-control-sm" value="50" min="1" max="500">
              </div>
            </div>
          </div>

          <!-- Watermark Options -->
          <div class="fieldset-card">
            <div class="d-flex align-items-center justify-content-between mb-2">
              <div class="fieldset-title">Add Watermark</div>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="enableWatermark">
              </div>
            </div>
            <div id="watermarkOptions" style="display: none;">
              <div class="mb-2">
                <label class="form-label small">Watermark Text</label>
                <input id="watermarkText" type="text" class="form-control form-control-sm" placeholder="¬© Your Company">
              </div>
              <div class="mb-2">
                <label class="form-label small">Position</label>
                <select id="watermarkPosition" class="form-select form-select-sm">
                  <option value="bottom-right">Bottom Right</option>
                  <option value="bottom-left">Bottom Left</option>
                  <option value="top-right">Top Right</option>
                  <option value="top-left">Top Left</option>
                  <option value="center">Center</option>
                </select>
              </div>
              <div class="row g-2">
                <div class="col-6">
                  <label class="form-label small">Opacity</label>
                  <input id="watermarkOpacity" type="range" class="form-range" min="0" max="100" value="50">
                  <small class="text-muted" id="opacityValue">50%</small>
                </div>
                <div class="col-6">
                  <label class="form-label small">Font Size</label>
                  <input id="watermarkFontSize" type="number" class="form-control form-control-sm" value="24" min="8" max="200">
                </div>
              </div>
            </div>
          </div>

          <!-- Rotation/Flip -->
          <div class="fieldset-card">
            <div class="fieldset-title">Transform</div>
            <div class="mb-2">
              <label class="form-label small">Rotate</label>
              <select id="rotation" class="form-select form-select-sm">
                <option value="0">No rotation</option>
                <option value="90">90¬∞ clockwise</option>
                <option value="180">180¬∞</option>
                <option value="270">270¬∞ clockwise</option>
              </select>
            </div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="flipHorizontal">
              <label class="form-check-label small" for="flipHorizontal">
                Flip horizontal
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="flipVertical">
              <label class="form-check-label small" for="flipVertical">
                Flip vertical
              </label>
            </div>
          </div>

          <!-- Optimization -->
          <div class="fieldset-card">
            <div class="fieldset-title">Optimization</div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="stripMetadata" checked>
              <label class="form-check-label small" for="stripMetadata">
                Strip metadata (reduce size)
              </label>
            </div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="progressive">
              <label class="form-check-label small" for="progressive">
                Progressive JPEG
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="optimize" checked>
              <label class="form-check-label small" for="optimize">
                Optimize file size
              </label>
            </div>
          </div>

          <!-- File Naming -->
          <div class="fieldset-card">
            <div class="fieldset-title">File Naming</div>
            <div class="mb-2">
              <label class="form-label small">Prefix</label>
              <input id="filenamePrefix" type="text" class="form-control form-control-sm" placeholder="converted_">
              </div>
            <div class="mb-2">
              <label class="form-label small">Suffix</label>
              <input id="filenameSuffix" type="text" class="form-control form-control-sm" placeholder="_optimized">
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="addTimestamp">
              <label class="form-check-label small" for="addTimestamp">
                Add timestamp
              </label>
            </div>
          </div>

          <!-- Color Adjustments -->
          <div class="fieldset-card">
            <div class="d-flex align-items-center justify-content-between mb-2">
              <div class="fieldset-title">Color Adjustments</div>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="enableColorAdjust">
              </div>
            </div>
            <div id="colorAdjustOptions" style="display: none;">
              <div class="mb-2">
                <label class="form-label small">Brightness</label>
                <input id="brightness" type="range" class="form-range" min="-100" max="100" value="0">
                <small class="text-muted" id="brightnessValue">0</small>
              </div>
              <div class="mb-2">
                <label class="form-label small">Contrast</label>
                <input id="contrast" type="range" class="form-range" min="-100" max="100" value="0">
                <small class="text-muted" id="contrastValue">0</small>
              </div>
              <div class="mb-2">
                <label class="form-label small">Saturation</label>
                <input id="saturation" type="range" class="form-range" min="-100" max="100" value="0">
                <small class="text-muted" id="saturationValue">0</small>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="grayscale">
                <label class="form-check-label small" for="grayscale">
                  Convert to grayscale
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex gap-2 mt-3 flex-wrap">
        <button id="convertBtn" class="btn btn-primary btn-cy">
          <i class="fas fa-magic"></i> Convert Images
        </button>
        <button id="previewBtn" class="btn btn-ghost">
          <i class="fas fa-eye"></i> Preview Settings
        </button>
        <button id="clearBtn" class="btn btn-ghost">
          <i class="fas fa-trash"></i> Clear Results
        </button>
        <button id="downloadAllBtn" class="btn btn-ghost" disabled>
          <i class="fas fa-download"></i> Download All as ZIP
        </button>
        <button id="savePresetBtn" class="btn btn-ghost">
          <i class="fas fa-save"></i> Save Preset
        </button>
      </div>
    </section>

    <!-- Results -->
    <section class="cy-card p-4">
      <div class="mb-4">
        <h2 class="section-title">Conversion Results</h2>
        <p class="section-subtitle">Download converted images or view conversion details</p>
      </div>

      <div id="batchSummary" class="batch-summary d-none">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <strong>Batch Summary:</strong>
            <span id="summaryText">0 images processed</span>
          </div>
          <div class="conversion-stats">
            <div class="stat-item">
              <span class="stat-label">Success:</span>
              <span class="stat-value" id="successCount">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Failed:</span>
              <span class="stat-value" id="failedCount">0</span>
            </div>
          </div>
        </div>
      </div>

      <div id="resultsContainer">
        <div id="emptyState" class="empty-state">
          <div class="empty-glow"></div>
          <h3>No conversions yet</h3>
          <p>Add image URLs above and click "Convert Images" to get started.</p>
        </div>
      </div>
    </section>
  </div>

  <!-- Advanced Loading overlay -->
    <!-- Clean Loading overlay -->
  <div id="loading" class="overlay d-none">
    <div class="loading-container">
      <!-- Loading Icon -->
      <div class="loading-icon">üñºÔ∏è</div>
      
      <!-- Loading Text -->
      <div class="loading-text">Converting Images...</div>
      <div class="loading-message">Processing your files</div>
      
      <!-- Modern Progress Bar -->
      <div class="progress-container">
        <div class="progress-bar"></div>
      </div>
      
      <!-- Status Dots -->
      <div class="loading-dots">
        <div class="loading-dot"></div>
        <div class="loading-dot"></div>
        <div class="loading-dot"></div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
  <script src="{{ url_for('static', filename='js/image-converter.js') }}"></script>
</body>
</html>